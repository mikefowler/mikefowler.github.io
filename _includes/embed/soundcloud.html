{% assign base_url = 'https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/' %}

{% capture url %}
  {{ base_url || append: include.id }}
{% endcapture %}

{% capture query %}
  {% for option in site.soundcloud.options %}{{ option | join: '=' | prepend: '&amp;' }}{% endfor %}
{% endcapture %}

{% capture src %}
  {{ url | strip }}{{ query | strip | prepend: '&amp;' }}
{% endcapture %}

{% assign ratio = include.aspect_ratio | default: 0.25 | times: 100.0 | round: 4 %}

{% capture styles %}
  padding-top: {{ ratio }}%;
{% endcapture %}

<div class="embed embed--soundcloud" style="{{ styles | strip }}">
  <iframe width="100%" height="100%" scrolling="no" frameborder="no" src="{{ src }}"></iframe>
</div>
