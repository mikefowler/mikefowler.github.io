{"version":3,"file":"bundle.js","sources":["../_javascripts/detectFeatures.js","../_javascripts/lazyLoadImages.js","../_javascripts/main.js"],"sourcesContent":["export default function detectFeatures() {\n  const hasTouchSupport = 'ontouchstart' in window;\n\n  if (!hasTouchSupport) {\n    document.documentElement.classList.add('no-touch');\n  }\n}\n","const LOADING_CLASS = 'lazy-image--loading';\nconst LOADED_CLASS = 'lazy-image--loaded';\nconst images = [];\n\nfunction isElementInViewport(el) {\n  const bounds = el.getBoundingClientRect();\n\n  return (\n    bounds.top >= 0 &&\n    bounds.left >= 0 &&\n    bounds.top <= window.innerHeight\n  );\n}\n\nfunction loadImage(el) {\n  const imageSrc = el.getAttribute('data-src');\n  const backgroundEl = el.querySelector('.js-lazy-image-background');\n  const image = new Image();\n  let shimmerTimeout;\n\n  image.onload = () => {\n    // The onload event only needs to run once, so\n    // we deference this function.\n    image.onload = null;\n\n    // Set the background image source\n    backgroundEl.style.backgroundImage = `url(${imageSrc})`;\n\n    // Swap the loading class for the loaded class on the root element\n    el.classList.remove(LOADING_CLASS);\n    el.classList.add(LOADED_CLASS);\n\n    // Clear the shimmer timeout\n    if (shimmerTimeout) {\n      clearTimeout(shimmerTimeout);\n    }\n  };\n\n  // If an image takes longer than 200 milliseconds to load, we\n  // add a shimmer effect to the container. The delay also prevents\n  // the shimmer from displaying for images that are already cached\n  // which can look noisy.\n  shimmerTimeout = setTimeout(() => {\n    el.classList.add(LOADING_CLASS);\n  }, 200);\n\n  // Setting the source of the Image object kicks off the loading process\n  image.src = imageSrc;\n}\n\nfunction loadImagesInViewport() {\n  for (let i = images.length - 1; i >= 0; i -= 1) {\n    if (isElementInViewport(images[i])) {\n      loadImage(images[i]);\n      images.splice(i, 1);\n    }\n  }\n}\n\nexport default function lazyLoadImages() {\n  const query = document.querySelectorAll('.js-lazy-image');\n\n  for (let i = 0; i < query.length; i += 1) {\n    images.push(query[i]);\n  }\n\n  loadImagesInViewport();\n  document.addEventListener('scroll', loadImagesInViewport);\n}\n","import detectFeatures from './detectFeatures';\nimport lazyLoadImages from './lazyLoadImages';\n\nfunction init() {\n  detectFeatures();\n  lazyLoadImages();\n}\n\nwindow.addEventListener('DOMContentLoaded', init);\n"],"names":["detectFeatures","window","document","documentElement","classList","add","isElementInViewport","el","const","bounds","getBoundingClientRect","top","left","innerHeight","loadImage","shimmerTimeout","imageSrc","getAttribute","backgroundEl","querySelector","image","Image","onload","style","backgroundImage","remove","LOADING_CLASS","LOADED_CLASS","clearTimeout","setTimeout","src","loadImagesInViewport","let","i","images","length","splice","lazyLoadImages","query","querySelectorAll","push","addEventListener","init"],"mappings":"wBAAe,SAASA,KACE,gBAAkBC,SAGxCC,SAASC,gBAAgBC,UAAUC,IAAI,YCA3C,QAASC,GAAoBC,GAC3BC,GAAMC,GAASF,EAAGG,uBAElB,OACED,GAAOE,KAAO,GACdF,EAAOG,MAAQ,GACfH,EAAOE,KAAOV,OAAOY,YAIzB,QAASC,GAAUP,GACjBC,GAGIO,GAHEC,EAAWT,EAAGU,aAAa,YAC3BC,EAAeX,EAAGY,cAAc,6BAChCC,EAAQ,GAAIC,MAGlBD,GAAME,OAAS,WAGbF,EAAME,OAAS,KAGfJ,EAAaK,MAAMC,gBAAkB,OAAOR,MAG5CT,EAAGH,UAAUqB,OAAOC,GACpBnB,EAAGH,UAAUC,IAAIsB,GAGbZ,GACFa,aAAab,IAQjBA,EAAiBc,WAAW,WAC1BtB,EAAGH,UAAUC,IAAIqB,IAChB,KAGHN,EAAMU,IAAMd,EAGd,QAASe,KACP,IAAKC,GAAIC,GAAIC,EAAOC,OAAS,EAAGF,GAAK,EAAGA,GAAK,EACvC3B,EAAoB4B,EAAOD,MAC7BnB,EAAUoB,EAAOD,IACjBC,EAAOE,OAAOH,EAAG,IAKvB,QAAwBI,KAGtB,IAAKL,GAFCM,GAAQpC,SAASqC,iBAAiB,kBAE/BN,EAAI,EAAGA,EAAIK,EAAMH,OAAQF,GAAK,EACrCC,EAAOM,KAAKF,EAAML,GAGpBF,KACA7B,SAASuC,iBAAiB,SAAUV,GChEtC,QAASW,KACP1C,IACAqC,IDLF7B,GAAMkB,GAAgB,sBAChBC,EAAe,qBACfO,ICMNjC,QAAOwC,iBAAiB,mBAAoBC"}